"use strict";let BuxlViewPrototype=function(a){if(this.elements=a,this.events=a.events,this.eventfunctions={},this.elements.templates)for(let a=0;a<this.elements.templates.length;a++){let b=this.elements.templates[a],c=document.getElementById(b);jsrender.templates(b,c)}if(this.elements.targetTemplate){let a=document.getElementById(this.elements.targetTemplate);this.template=jsrender.templates(this.elements.targetTemplate,a)}};BuxlViewPrototype.prototype.registerEventsPerTrigger=function(a,b,c,d){for(let e,f=0;f<c.length;f++)e=b,a.removeEventListener(c[f],this.eventfunctions[e],!0),d&&a.addEventListener(c[f],this.eventfunctions[e],!0)},BuxlViewPrototype.prototype.registerEvents=function(a){if(this.events)for(let b,c=0;c<this.events.length;c++)if(b=this.events[c].triggers.split(" "),"window"===this.events[c].target)this.registerEventsPerTrigger(window,this.events[c].f,b,a);else{let d=document.querySelectorAll(this.events[c].target);for(let e=0;e<d.length;e++)this.registerEventsPerTrigger(d[e],this.events[c].f,b,a)}},BuxlViewPrototype.prototype.render=function(a,b){let c=jsrender.render[this.elements.targetTemplate](a?a:{}),d=document.getElementById(this.elements.targetView);d.innerHTML=c,b&&this.registerEvents(!0)},BuxlViewPrototype.prototype.routeTo=function(a,b){if(b)location.hash="#/"+a+"/"+b;else{let b=new CustomEvent("hiddenroute",{detail:"#/"+a+"/"});window.dispatchEvent(b)}},BuxlViewPrototype.prototype.linkEventsToController=function(a){if(a&&this.events)for(let b=0;b<this.events.length;b++){let c=this.events[b].f,d=a,e=d.onEvent(c);e&&(this.eventfunctions[c]=e.bind(d))}},BuxlViewPrototype.prototype.clearRender=function(){let a=document.getElementById(this.elements.targetView);a&&(a.innerHTML="")};let BuxlFavoritesModel=function(){this.savedFavorites=[],this.unsavedFavorites=[],this.trashedFavorites=[],this.storageKey="buxlStoredFavorites"};BuxlFavoritesModel.prototype.getFavorites=function(){return this.savedFavorites},BuxlFavoritesModel.prototype.loadFavorites=function(){this.unsavedFavorites=[],this.trashedFavorites=[];let a=localStorage.getItem(this.storageKey);this.savedFavorites=a?JSON.parse(a):[]},BuxlFavoritesModel.prototype.saveFavorites=function(){localStorage.setItem(this.storageKey,JSON.stringify(this.savedFavorites)),this.unsavedFavorites=[],this.trashedFavorites=[]},BuxlFavoritesModel.prototype.mergeUnsavedFavorites=function(){this.savedFavorites=this.savedFavorites.concat(this.unsavedFavorites),this.unsavedFavorites=[],this.trashedFavorites=[]},BuxlFavoritesModel.prototype.isFavorite=function(a){return-1!==this.savedFavorites.indexOf(a)},BuxlFavoritesModel.prototype.toggleFavorite=function(a){let b=!1,c=-1;return this.isFavorite(a)?(c=this.savedFavorites.indexOf(a),this.savedFavorites.splice(c,1),this.trashedFavorites.unshift(a)):-1===this.unsavedFavorites.indexOf(a)?(this.unsavedFavorites.unshift(a),b=!0):(i=this.unsavedFavorites.indexOf(a),this.unsavedFavories.splice(c,1),this.trashedFavorites.unshift(a)),b};let BuxlGameModel=function(a){this.buxls=a,this.currentGameHash=-1,this.wordLength=-1,this.selectedLetters=[],this.unsolved=[],this.solved=[],this.unsolvedHiddenChar="&ensp;",this.unsolvedHiddenChars="",this.latestSolvedPosition=0};BuxlGameModel.prototype.getBuxlsCount=function(){return Object.keys(this.buxls).length},BuxlGameModel.prototype.getCurrentBuxl=function(){let a=this.getBuxl(this.currentGameHash);return a.solved=this.solved,a.unsolved=this.unsolved,a.unsolvedHiddenChars=this.unsolvedHiddenChars,a.latestSolvedPosition=this.latestSolvedPosition,a},BuxlGameModel.prototype.getBuxl=function(a){let b=this.buxls[a];return b?{gameHash:a,front:b.f,back:b.b,solutions:b.s}:null},BuxlGameModel.prototype.setCurrentBuxlById=function(a){let b=Object.keys(this.buxls);return b[a]?this.setCurrentBuxl(b[a]):this.setCurrentBuxl(null)},BuxlGameModel.prototype.setCurrentBuxl=function(a){return a&&!this.getBuxl(a)?(this.selectedLetters=[],this.unsolved=[],this.solved=[],this.latestSolvedPosition=0,!1):(this.currentGameHash!==a&&(this.selectedLetters=[],this.unsolved=[],this.solved=[],this.latestSolvedPosition=0,this.currentGameHash=a,this.wordLength=this.getBuxl(this.currentGameHash).solutions[0].length,this.unsolvedHiddenChars=this.unsolvedHiddenChar.repeat(this.wordLength),this.generateUnsolvedList()),!0)},BuxlGameModel.prototype.generateUnsolvedList=function(){let a=this.getBuxl(this.currentGameHash).solutions,b=a.length;this.unsolved=[];for(let c=0;c<b;c++)-1===this.solved.indexOf(a[c])&&this.unsolved.unshift(a[c])},BuxlGameModel.prototype.getUnsolvedCount=function(){return this.unsolved.length},BuxlGameModel.prototype.selectedLetterExists=function(a){for(let b=0;b<this.selectedLetters.length;b++)if(this.selectedLetters[b]===a)return!0},BuxlGameModel.prototype.setSelectedLetter=function(a){let b=0;for(;b<this.selectedLetters.length;b++)if("_"===this.selectedLetters[b])return this.selectedLetters[b]=a,b;return this.selectedLetters.push(a),b},BuxlGameModel.prototype.getHashesByLetter=function(a){let b=this.getBuxl(this.currentGameHash),c={},d=!1,e=0;for(;e<b.front.length;e++){if(b.front[e]===a){c.selectedLetter="f"+e,d=!0;break}if(b.back[e]===a){c.selectedLetter="b"+e,d=!1;break}}return c.selectedLetter?(c.oppositeLetter=(d?"b":"f")+e,c):null},BuxlGameModel.prototype.swapSelectedLetter=function(a,b){for(let c=0;c<this.selectedLetters.length;c++)if(this.selectedLetters[c]===a)return void(this.selectedLetters[c]=b)},BuxlGameModel.prototype.delSelectedLetter=function(a){for(let b=0;b<this.selectedLetters.length;b++)if(this.selectedLetters[b]===a)return this.selectedLetters[b]="_",!0},BuxlGameModel.prototype.delAllSelectedLetters=function(){this.selectedLetters=[]},BuxlGameModel.prototype.getSelectedLetters=function(){let a="";for(let b=0;b<this.selectedLetters.length;b++)a+=this.getLetterById(this.selectedLetters[b]);return a},BuxlGameModel.prototype.getLetterById=function(a){if("_"===a)return"_";let b=a.substring(0,1),c=a.substring(1),d=this.getBuxl(this.currentGameHash);if(!b)return null;return"f"===b?d.front[c]:"b"===b?d.back[c]:null},BuxlGameModel.prototype.getWordLength=function(){return this.wordLength},BuxlGameModel.prototype.getSolutions=function(){return this.getBuxl(this.currentGameHash).solutions},BuxlGameModel.prototype.addSolved=function(){let a=this.getSelectedLetters(),b=this.solved.indexOf(a);return-1===b?(this.solved.unshift(a),this.generateUnsolvedList(),this.latestSolvedPosition=0,!0):(this.latestSolvedPosition=b,!1)};let BuxlListModel=function(a){this.buxlGameModel=a.buxlGameModel,this.buxlFavoritesModel=a.buxlFavoritesModel};BuxlListModel.prototype.getFavoritesList=function(){this.buxlFavoritesModel.savedFavorites||this.buxlFavoritesModel.loadFavorites();let a=this.buxlFavoritesModel.savedFavorites,b=this.buxlFavoritesModel.trashedFavorites,c=[];for(let b,d=0;d<a.length;d++)b=this.buxlGameModel.getBuxl(a[d]),b&&(b.solved=b.solutions,b.isFavorite=!0,c.push(b));return 0===c.length&&c.push({front:["K","E","I","N"],back:["B","U","X","L"]}),c};function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}let BuxlGameView=function(a){BuxlViewPrototype.call(this,a)};BuxlGameView.prototype=Object.create(BuxlViewPrototype.prototype),BuxlGameView.prototype.onLetterClick=function(a){let b=document.querySelector("[data-game-btn-id=\""+a+"\"]");anime({targets:b,scale:.8,easing:"easeInOutQuad",direction:"alternate",duration:100,complete:function(){b.style=""}})},BuxlGameView.prototype.setSelectedLetterInactive=function(a,b){this.onLetterClick(a),this.changeButtonByHash(a,"letter-selected","letter-inactive"),this.changeButtonByHash(b,"letter-notselected","letter-inactive")},BuxlGameView.prototype.setSelectedLetter=function(a,b){this.onLetterClick(a),this.changeButtonByHash(a,"letter-inactive","letter-selected"),this.changeButtonByHash(b,"letter-inactive","letter-notselected")},BuxlGameView.prototype.swapLetter=function(a,b){this.onLetterClick(b),this.changeButtonByHash(a,"letter-selected","letter-notselected"),this.changeButtonByHash(b,"letter-notselected","letter-selected")},BuxlGameView.prototype.setSelectedLetters=function(a){for(let b,c=0;c<a.length;c++)b=document.querySelector("[data-solution-index=\""+c+"\"]"),b&&(b.innerHTML=a[c])},BuxlGameView.prototype.animateWrongWord=(()=>{var a=_asyncToGenerator(function*(a){this.curDataModel=a;let b=this,c=document.querySelector("#buxlhelp");c.src="images/buxlne.svg",anime({targets:".letter-solution-mass",duration:1e3,backgroundColor:"#ff0066",easing:"easeOutBack"}),anime({targets:c,translateX:[".60rem","-.60rem",".60rem"],duration:500,direction:"alternate",loop:2,easing:"easeInOutQuart"}),anime({targets:".gamewrap",translateX:["-.60rem",".60rem","-.60rem"],duration:500,loop:2,easing:"easeInOutQuart",direction:"alternate",complete:b.render.bind(b,a,!0)})});return function(){return a.apply(this,arguments)}})(),BuxlGameView.prototype.animateSolved=(()=>{var a=_asyncToGenerator(function*(a){return anime({targets:".letter-solution-mass",duration:500,backgroundColor:"#b2ff33",easing:"easeOutBack"}),yield anime({targets:".letter-selected",duration:200,delay:0,opacity:.2,loop:5,easing:"linear"}).finished,this.render(a,!0),yield anime({targets:".latestsolved",scale:2,duration:400,opacity:.6,direction:"alternate",easing:"easeInOutQuart"}).finished,!0});return function(){return a.apply(this,arguments)}})();let funcx=function(){return anime.random(-40,40)+"px"},funcy=function(){return anime.random(-40,40)+"px"};BuxlGameView.prototype.animateGameFinished=(()=>{var a=_asyncToGenerator(function*(a,b){yield this.animateSolved(a);let c=this;yield anime({targets:".solutioncloud > span",duration:250,scale:1.3,delay:0,opacity:.2,loop:5,easing:"linear"}).finished,yield anime({targets:".letter-mass",translateX:[funcx(),funcx()],translateY:[funcy(),funcy()],scale:[1,20],opacity:[1,0],backgroundColor:"#b2ff33",easing:"easeInOutQuart",delay:0,duration:400}).finished,this.render(b,!1),anime({targets:".letter-mass",translateX:["+=0",0],translateY:["+=0",0],scale:[20,1],opacity:[0,1],easing:"easeInOutQuart",delay:0,duration:400,complete:function(){BuxlViewPrototype.prototype.routeTo.call(c,"buxl",b.gameHash)}})});return function(){return a.apply(this,arguments)}})(),BuxlGameView.prototype.animateGameReload=function(a){BuxlViewPrototype.prototype.routeTo.call(this,"buxl",a.gameHash)},BuxlGameView.prototype.animateHint=function(a){let b=document.querySelector("[data-game-btn-id=\""+a+"\"]"),c=document.querySelector("#buxlhelp");c.src="images/buxlwoh.svg",anime({targets:b,rotate:["-35","35","-35"],duration:350,loop:4,easing:"easeInOutQuart",direction:"alternate",complete:function(){b.style=""}}),anime({targets:c,scale:.8,duration:350,easing:"easeInOutQuart",direction:"alternate",complete:function(){c.style="",setTimeout(function(){c.src="images/buxlsmile.svg"},200)}})},BuxlGameView.prototype.animateHintError=function(){let a=document.querySelectorAll(".gamewrap > div > div > div"),b=document.querySelector("#buxlhelp");b.src="images/buxlne.svg",anime({targets:".letter-solution-mass",duration:100,backgroundColor:"#ff0066",easing:"easeOutBack"}),anime({targets:a,translateX:["-.60rem",".60rem","-.60rem"],duration:60,direction:"alternate",loop:4,easing:"easeInOutQuart",complete:function(){for(let b=0;b<a.length;b++)a[b].style=""}}),anime({targets:b,rotate:["-15","15","-15"],duration:60,direction:"alternate",loop:4,easing:"easeInOutQuart",complete:function(){b.style=""}})},BuxlGameView.prototype.changeButtonByHash=function(a,b,c){let d=document.querySelector("#buxlhelp");d.src="images/buxlsmile.svg",anime({targets:".letter-solution-mass",duration:100,backgroundColor:"#b7e2f8",easing:"easeOutBack"});let e=document.querySelector("[data-game-btn-id=\""+a+"\"]");e&&e.classList.contains(b)&&(e.classList.remove(b),e.classList.add(c))};function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}let BuxlIntroView=function(a){BuxlViewPrototype.call(this,a)};BuxlIntroView.prototype=Object.create(BuxlViewPrototype.prototype),BuxlIntroView.prototype.animateLogo=(()=>{var a=_asyncToGenerator(function*(){let a=this,b=anime.timeline({autoplay:!0});yield b.add({targets:"#path82",translateX:["-30%","0%"],elasticity:100}).add({targets:"#path226",translateY:["200%","0%"],offset:"-=700"}).add({targets:"#path298",translateY:["200%","0%"],offset:"-=900"}).add({targets:"#path154",translateX:["30%","0%"],offset:"-=800"}).finished});return function(){return a.apply(this,arguments)}})(),BuxlIntroView.prototype.render=(()=>{var a=_asyncToGenerator(function*(a){yield this.animateLogo();let b=this,c=anime.timeline({autoplay:!0});c.add({targets:"svg",height:["100","13"],opacity:["1","0"],elasticity:0,translateY:["60%"],ease:"linear",complete:function(){let b=document.querySelector(".buxllogo");b&&b.classList.remove("buxllogo"),a&&a()}}).add({targets:"svg",height:["0px","100px"],opacity:["0","1"],translateY:["0%"],elasticity:0,ease:"linear"})});return function(){return a.apply(this,arguments)}})();let BuxlListView=function(a){BuxlViewPrototype.call(this,a)};BuxlListView.prototype=Object.create(BuxlViewPrototype.prototype);let BuxlNavigationView=function(a){BuxlViewPrototype.call(this,a)};BuxlNavigationView.prototype=Object.create(BuxlViewPrototype.prototype),BuxlNavigationView.prototype.toggleFavorite=function(a){let b=this,c="rgba(183, 226, 248, 0.75)",d="rgba(255, 0, 102 , 1)",e=d,f=c;if(a.isFavorite&&(e=c,f=d),anime({targets:"[data-game-hash=\""+a.gameHash+"\"] .favorite > i",scale:[1,99,1],color:[e,f],easing:"easeOutQuad"}),"favorites"==a.route){let b=document.querySelector("[data-game-hash=\""+a.gameHash+"\"]");if(!b)return;b.classList.contains("fade-out")?anime({targets:b,opacity:1,easing:"easeOutQuad",complete:function(){b.classList.remove("fade-out")}}):anime({targets:b,opacity:.3,easing:"easeOutQuad",complete:function(){b.classList.add("fade-out")}})}},BuxlNavigationView.prototype.showSolutions=function(a){let b=document.querySelector("[data-game-hash=\""+a+"\"] > .solutioncloud");b&&b.classList.toggle("not-visible")},BuxlNavigationView.prototype.goBack=function(){window.history.back()};let BuxlFooterView=function(a){BuxlViewPrototype.call(this,a)};BuxlFooterView.prototype=Object.create(BuxlViewPrototype.prototype);let BuxlRoutingView=function(a){BuxlViewPrototype.call(this,a)};BuxlRoutingView.prototype=Object.create(BuxlViewPrototype.prototype);let BuxlLegalView=function(a){BuxlViewPrototype.call(this,a)};BuxlLegalView.prototype=Object.create(BuxlViewPrototype.prototype),BuxlLegalView.prototype.render=function(a){let b=jsrender.render[a+"tmpl"]({}),c=document.getElementById(this.elements.targetView);c.innerHTML=b};let BuxlControllerPrototype=function(){this.events=[]};BuxlControllerPrototype.prototype.onEvent=function(a){let b=this.events[a];return b?b:(console.log("[Warning] Event not found"),null)},BuxlControllerPrototype.prototype.route=function(a){},BuxlControllerPrototype.prototype.init=function(){this.view&&this.view.linkEventsToController(this)},BuxlControllerPrototype.prototype.register=function(a,b){this.view=a,this.model=b};let BuxlGameController=function(){BuxlControllerPrototype.call(this)};BuxlGameController.prototype=Object.create(BuxlControllerPrototype.prototype),BuxlGameController.prototype.onKeyPressLetterEvent=function(a){a.stopImmediatePropagation();let b=String.fromCharCode(a.which);if(b.match("\\?"))return void this.solutionManagerEvent(a);if(b.match(/^[a-zA-ZẞßÄÖÜäüö]+$/)){b=b.match(/^ß$/)?"\u1E9E":b.toUpperCase();let a=this.model.getHashesByLetter(b);a&&this.performSelectLetter(a.selectedLetter,a.oppositeLetter)}},BuxlGameController.prototype.onSelectLetterEvent=function(a){a.stopPropagation(),a.preventDefault();let b=a.target,c=null;if(c=0<b.childElementCount?b.dataset.gameBtnId?b.dataset.gameBtnId:b.parentElement.dataset.gameBtnId?b.parentElement.dataset.gameBtnId:b.firstElementChild.dataset.gameBtnId:b.parentElement.parentElement.dataset.gameBtnId,!c)return void console.log("Element could not be found"+a.target);let d=c.substring(0,1),e=c.substring(1),f=("f"===d?"b":"f")+e;this.performSelectLetter(c,f)},BuxlGameController.prototype.performSelectLetter=function(a,b){this.model.selectedLetterExists(a)?(this.model.delSelectedLetter(a),this.view.setSelectedLetterInactive(a,b)):this.model.selectedLetterExists(b)?(this.model.swapSelectedLetter(b,a),this.view.swapLetter(b,a)):(this.model.setSelectedLetter(a),this.view.setSelectedLetter(a,b));let c=this.model.getSelectedLetters();if(this.view.setSelectedLetters(c),c.length===this.model.getWordLength()){let a=this.model.getSolutions().indexOf(c);if(-1!==a){let a=this.model.addSolved();if(0===this.model.getUnsolvedCount()){let a=this.model.getCurrentBuxl();this.createNewRandomGame(),this.view.animateGameFinished(a,this.model.getCurrentBuxl())}else a?this.view.animateSolved(this.model.getCurrentBuxl()):this.view.animateSolved(this.model.getCurrentBuxl())}else this.view.animateWrongWord(this.model.getCurrentBuxl());this.model.delAllSelectedLetters()}},BuxlGameController.prototype.solutionManagerEvent=function(a){a.stopPropagation(),a.preventDefault();let b=new Uint32Array(1),c=this.model.unsolved.slice(),d=this.model.selectedLetters;window.crypto.getRandomValues(b);let e=this.model.unsolved[b%c.length][0],f=!1;for(let b=0;b<d.length;b++)for(let a,g=0;g<c.length;g++)if(a=this.model.getLetterById(d[b]),a.match(c[g][b]))f||(e=c[g][b+1]);else if(a.match("_")){f||(f=!0,e=c[g][b]);break}else{c.splice(g,1),b--;break}if(0===c.length)this.view.animateHintError();else{let a=this.model.getHashesByLetter(e);this.view.animateHint(a.selectedLetter)}},BuxlGameController.prototype.createNewRandomGame=function(){let a=new Uint32Array(1),b=this.model.getBuxlsCount();window.crypto.getRandomValues(a);this.model.setCurrentBuxlById(a%b)},BuxlGameController.prototype.route=function(a,b){b?this.model.setCurrentBuxl(b)?this.view.render(this.model.getCurrentBuxl(),!0):this.view.routeTo("buxl",null):(this.createNewRandomGame(),this.view.animateGameReload(this.model.getCurrentBuxl()))},BuxlGameController.prototype.register=function(a,b){BuxlControllerPrototype.prototype.register.call(this,a,b),this.events.onSelectLetterEvent=this.onSelectLetterEvent,this.events.onKeyPressLetterEvent=this.onKeyPressLetterEvent,this.events.onClickSolutionEvent=this.solutionManagerEvent};let BuxlIntroController=function(){BuxlControllerPrototype.call(this)};BuxlIntroController.prototype=Object.create(BuxlControllerPrototype.prototype),BuxlIntroController.prototype.onLogoClickEvent=function(){this.view.animateLogo()},BuxlIntroController.prototype.register=function(a,b){BuxlControllerPrototype.prototype.register.call(this,a,b),this.events.onLogoClickEvent=this.onLogoClickEvent},BuxlIntroController.prototype.init=function(a){BuxlControllerPrototype.prototype.init.call(this),this.view.render(a,!0)};let BuxlListController=function(){BuxlControllerPrototype.call(this)};BuxlListController.prototype=Object.create(BuxlControllerPrototype.prototype),BuxlListController.prototype.route=function(a){let b=this.model.getFavoritesList();this.view.render(b,!1)},BuxlListController.prototype.register=function(a,b){BuxlControllerPrototype.prototype.register.call(this,a,b)},BuxlListController.prototype.init=function(){BuxlControllerPrototype.prototype.init.call(this)};let BuxlNavigationController=function(){BuxlControllerPrototype.call(this),this.currentGameHash=null};BuxlNavigationController.prototype=Object.create(BuxlControllerPrototype.prototype),BuxlNavigationController.prototype.triggerAction=function(a,b){switch(!0){case a.contains("shuffle"):return this.view.routeTo("buxl",null),!0;case a.contains("listFavorites"):return this.view.routeTo("favorites","list"),!0;case a.contains("favorite"):return this.toggleFavorite(b),!0;case a.contains("playBuxl"):return this.view.routeTo("buxl",b),!0;case a.contains("showSolutions"):return this.view.showSolutions(b),!0;case a.contains("goBack"):return this.view.goBack(),!0;}return!1},BuxlNavigationController.prototype.onNavigationClickEvent=function(a){if(a.stopPropagation(),a.preventDefault(),!!a.target){let b=a.currentTarget.dataset.gameHash;a.target.parentElement&&this.triggerAction(a.target.parentElement.classList,b)||a.target.firstElementChild&&this.triggerAction(a.target.firstElementChild.classList,b)}},BuxlNavigationController.prototype.toggleFavorite=function(a){if(a){let b=this.model.toggleFavorite(a);this.model.mergeUnsavedFavorites(),this.model.saveFavorites();let c={isFavorite:b,route:this.currentRoute,gameHash:a};this.view.toggleFavorite(c)}},BuxlNavigationController.prototype.route=function a(a,b){if(this.currentRoute=a,"buxl"===a&&b){let c=this.model.isFavorite(b);this.view.render({isFavorite:c,route:a,gameHash:b},!0)}else"favorites"===a&&this.view.registerEvents(!0)},BuxlNavigationController.prototype.register=function(a,b){this.events.onNavigationClickEvent=this.onNavigationClickEvent,this.renders=[],BuxlControllerPrototype.prototype.register.call(this,a,b)},BuxlNavigationController.prototype.init=function(){BuxlControllerPrototype.prototype.init.call(this),this.model.loadFavorites()};let BuxlLegalController=function(){BuxlControllerPrototype.call(this)};BuxlLegalController.prototype=Object.create(BuxlControllerPrototype.prototype),BuxlLegalController.prototype.route=function a(a){this.view.render(a)},BuxlLegalController.prototype.init=function(){BuxlControllerPrototype.prototype.init.call(this)};let BuxlFooterController=function(){BuxlControllerPrototype.call(this)};BuxlFooterController.prototype=Object.create(BuxlControllerPrototype.prototype),BuxlFooterController.prototype.route=function(a){this.view.render()};let BuxlRoutingController=function(){this.controllers={},this.routes={},this.events={};let a=[];a.push({target:"window",triggers:"hashchange hiddenroute",f:"doRouting"}),this.view=new BuxlRoutingView({targetView:null,targetTemplate:null,events:a}),this.events.doRouting=this.doRouting,this.view.linkEventsToController(this)};BuxlRoutingController.prototype=Object.create(BuxlControllerPrototype.prototype),BuxlRoutingController.prototype.register=function(a,b,c){if(a){let d=this.controllers[a];d.register(b,c)}},BuxlRoutingController.prototype.doRouting=function(a){let b=null;a&&(a.stopImmediatePropagation(),a.detail&&(b=a.detail)),b||(b=window.location.hash),b=b.substring(2).split("/"),this.route(b[0],b[1])},BuxlRoutingController.prototype.route=function a(a,b){if(""===a)return void this.routeDefault();let c=this.routes[a],d=!1;this.latestRoute!==a&&this.unregisterEvents(),this.latestRoute=a;for(let e=0;e<c.length;e++)c[e]&&(d=!0,c[e].route(a,b));d||this.routeDefault()},BuxlRoutingController.prototype.routeDefault=function(){this.view.routeTo("buxl",null)},BuxlRoutingController.prototype.registerRoutes=function(){this.controllers.buxlgame=new BuxlGameController,this.controllers.intro=new BuxlIntroController,this.controllers.footer=new BuxlFooterController,this.controllers.navbar=new BuxlNavigationController,this.controllers.list=new BuxlListController,this.controllers.legal=new BuxlLegalController,this.routes.buxl=[],this.routes.buxl.push(this.controllers.buxlgame),this.routes.buxl.push(this.controllers.navbar),this.routes.buxl.push(this.controllers.footer),this.routes.favorites=[],this.routes.favorites.push(this.controllers.list),this.routes.favorites.push(this.controllers.navbar),this.routes.favorites.push(this.controllers.footer),this.routes.imprint=[],this.routes.imprint.push(this.controllers.legal),this.routes.imprint.push(this.controllers.footer),this.routes.privacy=[],this.routes.privacy.push(this.controllers.legal),this.routes.privacy.push(this.controllers.footer)},BuxlRoutingController.prototype.unregisterEvents=function(){for(let a in this.controllers)this.controllers[a].view&&(this.controllers[a].view.registerEvents(!1),this.controllers[a].view.clearRender())},BuxlRoutingController.prototype.init=function(){for(let a in this.controllers)this.controllers[a].init(this.doRouting.bind(this));this.view.registerEvents(!0)};let getBuxlGameEvents=function(){let a=[];return a.push({target:".gamewrap",triggers:"click touchend",f:"onSelectLetterEvent"}),a.push({target:"body",triggers:"keypress",f:"onKeyPressLetterEvent"}),a.push({target:"#help",triggers:"click touchend",f:"onClickSolutionEvent"}),a},getBuxlNavigationEvents=function(){let a=[];return a.push({target:".navbar",triggers:"click touchend",f:"onNavigationClickEvent"}),a},getBuxlIntroEvents=function(){let a=[];return a.push({target:"#svg2",triggers:"click touchend",f:"onLogoClickEvent"}),a};document.addEventListener("DOMContentLoaded",function(){let a=new BuxlRoutingController;a.registerRoutes();let b=new BuxlGameModel(data),c=new BuxlFavoritesModel,d=new BuxlListModel({buxlGameModel:b,buxlFavoritesModel:c}),e=[];e.push("buxlstmpl"),e.push("solutionstmpl");let f=["buxlstmpl","navtmpl","solutionstmpl"];f.push("privacytmpl"),f.push("imprinttmpl");let g=new BuxlIntroView({targetView:null,targetTemplate:null,events:getBuxlIntroEvents()}),h=new BuxlFooterView({targetView:"footer",targetTemplate:"footertmpl",events:null}),j=new BuxlGameView({targetView:"content",targetTemplate:"gametmpl",templates:e,events:getBuxlGameEvents()}),k=new BuxlListView({targetView:"content",targetTemplate:"buxlslisttmpl",templates:f}),l=new BuxlNavigationView({targetView:"navigation",targetTemplate:"navtmpl",events:getBuxlNavigationEvents()}),m=new BuxlLegalView({targetView:"content",targetTemplate:null,templates:[],events:null});a.register("intro",g,null),a.register("buxlgame",j,b),a.register("navbar",l,c),a.register("list",k,d),a.register("legal",m,null),a.register("footer",h,null);let n=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if(!n){let a=document.getElementsByTagName("html")[0];a&&a.setAttribute("class","not-chrome")}a.init()});